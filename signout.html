<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mt Sinai Alumni Welfare System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <!-- Header & Navigation -->
    <header>
        <div class="nav-container">
           <div class="greeting">Hi, <span id="userName">User</span></div> <div class="logo">
                <span>MT-SINAI ALUMNI</span>
            </div>
            <nav class="nav-links">
                <a href="#home" class="active" data-section="home">Home</a>
                <a href="#events" data-section="events">Events</a>
                <a href="#members" data-section="members">Members</a>
                <a href="#manifesto" data-section="manifesto">Manifesto</a>
                <a href="#contact" data-section="contact">Contact</a>
            </nav>
            <div class="user-info">
    </div>
  </nav>
  <div class="modal" id="signoutModal">
    <div class="modal-content">
      <div class="modal-buttons">
        <button class="modal-btn confirm" id="confirmSignout">Log Out</button>
        <button class="modal-btn cancel" id="cancelSignout">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Simulating user data - in a real scenario, this would come from your authentication system
    const userData = {
      name: "Member",
      email: "caleb@example.com",
      joinDate: "January 15, 2023",
      membership: "Gold Tier"
    };

    // DOM elements
    const userNameElement = document.getElementById('userName');
    const signoutBtn = document.getElementById('signoutBtn');
    const signoutModal = document.getElementById('signoutModal');
    const confirmSignout = document.getElementById('confirmSignout');
    const cancelSignout = document.getElementById('cancelSignout');

    // Set user name
    userNameElement.textContent = userData.name;

    // Sign out button click handler
    signoutBtn.addEventListener('click', () => {
      signoutModal.style.display = 'flex';
    });

    // Confirm sign out
    confirmSignout.addEventListener('click', () => {
      // In a real application, you would call your sign out function here
      // For demonstration, we'll just show an alert and redirect to login
      alert('You have been signed out successfully.');
      window.location.href = 'index.html'; // Redirect to login page
    });

    // Cancel sign out
    cancelSignout.addEventListener('click', () => {
      signoutModal.style.display = 'none';
    });

    // Close modal if clicked outside
    window.addEventListener('click', (event) => {
      if (event.target === signoutModal) {
        signoutModal.style.display = 'none';
      }
    });
  </script>
  <script>
    // Your web app's Firebase configuration (same as in your login page)
    const firebaseConfig = {
      apiKey: "AIzaSyDeT_WqmDMgLNtIEzm-xKiS9kNzGBTpI0c",
      authDomain: "mt-sinai-welfare.firebaseapp.com",
      projectId: "mt-sinai-welfare",
      storageBucket: "mt-sinai-welfare.firebasestorage.app",
      messagingSenderId: "480570594278",
      appId: "1:480570594278:web:8ca60b6ba3348eb47e3c27"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const firestore = firebase.firestore();

    // Check authentication state and display user info
    auth.onAuthStateChanged((user) => {
      if (user) {
        // User is signed in
        firestore.collection('users').doc(user.uid).get()
          .then((doc) => {
            if (doc.exists) {
              const userData = doc.data();
              document.getElementById('userGreeting').textContent = `Hi ${userData.name}`;
            } else {
              document.getElementById('userGreeting').textContent = `Hi ${user.email}`;
            }
          })
          .catch((error) => {
            console.error("Error getting user data:", error);
            document.getElementById('userGreeting').textContent = `Hi User`;
          });
      } else {
        // No user is signed in, redirect to login page
        window.location.href = "index.html";
      }
    });

    // Sign out function
    function signOut() {
      auth.signOut().then(() => {
        // Sign-out successful, redirect to login page
        window.location.href = "index.html";
      }).catch((error) => {
        console.error("Sign out error:", error);
      });
    }
  </script>
        
    </header>

    <!-- Main Content -->
    <main>
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="hero">
                <h1>Welcome to Mt-Sinai Alumni Welfare</h1>
                <p>Strengthening our community through collaboration and mutual support. Together we grow, together we thrive.</p>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3>37</h3>
                    <p>Active Members</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3>2</h3>
                    <p>Events Completed</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-hand-holding-usd"></i>
                    <h3>KSH 22,850</h3>
                    <p>Total Contributions</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-trophy"></i>
                    <h3>2025</h3>
                    <p>Established</p>
                </div>
            </div>
             <div class="home-content">
                <div class="mission-card">
                    <h2>Our Mission</h2>
                    <p>We are dedicated to fostering a strong, supportive community of Mt Sinai alumni who work together to provide mutual assistance, promote professional development, and give back to our society.</p>
                    
                    <div class="mission-points">
                        <div class="mission-point">
                            <i class="fas fa-hands-helping"></i>
                            <span>Provide financial support during times of need</span>
                        </div>
                        <div class="mission-point">
                            <i class="fas fa-graduation-cap"></i>
                            <span>Support educational initiatives for members' children</span>
                        </div>
                        <div class="mission-point">
                            <i class="fas fa-heartbeat"></i>
                            <span>Offer assistance with medical expenses</span>
                        </div>
                        <div class="mission-point">
                            <i class="fas fa-network-wired"></i>
                            <span>Create networking opportunities for professional growth</span>
                        </div>
                    </div>
                </div>

            <div class="testimonials">
                <h2>What Our Members Say</h2>
                <div class="testimonial-grid">
                    <div class="testimonial-card">
                        <p class="testimonial-text">"The welfare has been a lifesaver for my family during difficult times."</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">JO</div>
                            <div class="author-details">
                                <h4>Joel Achoki</h4>
                                <p>Member since 2025</p>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">"Being part of this alumni network has opened up so many opportunities for me."</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">LY</div>
                            <div class="author-details">
                                <h4>Lydia Mose</h4>
                                <p>Member since 2025</p>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">"I'm proud to contribute to a family that genuinely supports its members."</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">MA</div>
                            <div class="author-details">
                                <h4>Markuse Onchabo</h4>
                                <p>Member since 2025</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="section">
            <h2>Events and Contributions</h2>
            <p>Stay updated with our latest events and contribution records.</p>
            <br>

            <div class="events-container">
                <div class="event-card">
                    <div class="event-header">
                        <h3>Event 3</h3>
                        <p>Active: Till Sept 12, 2025</p>
                    </div>
                    <div class="event-body">
                        <div class="event-details">
                            <p><i class="fas fa-info-circle"></i> Burial</p>
                            <p><i class="fas fa-bullseye"></i> Individual: KSH 300</p>
                            <p><i class="fas fa-bullseye"></i> Goal: KSH 11,100</p>
                            <p><i class="fas fa-check-circle"></i> Progress: 35%</p>
                        </div>
                    </div>
                </div>

                <div class="event-card">
                    <div class="event-header">
                        <h3>Event 2</h3>
                        <p>Completed: August 2025</p>
                    </div>
                    <div class="event-body">
                        <div class="event-details">
                            <p><i class="fas fa-info-circle"></i> Burial</p>
                            <p><i class="fas fa-bullseye"></i> Individual: KSH 300</p>
                            <p><i class="fas fa-bullseye"></i> Goal: KSH 11,100</p>
                            <p><i class="fas fa-check-circle"></i> Raised: KSH 5,750</p>
                        </div>
                    </div>
                </div>

                <div class="event-card">
                    <div class="event-header">
                        <h3>Event 1</h3>
                        <p>Completed: March 2025</p>
                    </div>
                    <div class="event-body">
                        <div class="event-details">
                            <p><i class="fas fa-info-circle"></i> Burial</p>
                            <p><i class="fas fa-bullseye"></i> Individual: KSH 500</p>
                            <p><i class="fas fa-bullseye"></i> Goal: KSH 18,500</p>
                            <p><i class="fas fa-check-circle"></i> Raised: KSH 17,100</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Members Section -->
        <section id="members" class="section">
            <h2>Members and Contributions</h2>
            <p>View member details and download contribution records.</p>
            <br>

            <div class="search-box">
                <h3>Download Contribution Records</h3>
                <div class="search-form">
                    <input type="text" id="welfare-number" placeholder="Enter Welfare Number">
                    <button type="button" id="search-member">
                        <i class="fas fa-search"></i> Search Member
                    </button>
                </div>
                
                <div class="download-options">
                    <button class="download-btn individual" id="download-individual">
                        <i class="fas fa-download"></i> Download Individual Report
                    </button>
                    <button class="download-btn full" id="download-full">
                        <i class="fas fa-file-download"></i> Download Full Contribution List
                    </button>
                </div>
            </div>

            <div class="members-table-container">
                <table class="members-table">
                    <thead>
                        <tr>
                            <th>Welfare No.</th>
                            <th>Name</th>
                            <th>1st Event</th>
                            <th>2nd Event</th>
                            <th>3rd Event</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Member data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Manifesto Section -->
        <section id="manifesto" class="section">
            <br>
            <br>
            <br>
            <br>
            <h2>Our Manifesto</h2>
            <p>The guiding principles of our alumni association.</p>

            <div class="manifesto-content">
                <h2>Mt Sinai Alumni Welfare Manifesto</h2>
                <p>We, the members of Mt Sinai Alumni Association, committed to the spirit of unity and mutual support, establish this manifesto to guide our collective actions and aspirations.</p>
                
                <div class="manifesto-points">
                    <div class="point-card">
                        <h3>Unity & Collaboration</h3>
                        <p>We believe in the power of unity and collaborative efforts to achieve common goals and support each other in times of need.</p>
                    </div>
                    <div class="point-card">
                        <h3>Transparency</h3>
                        <p>All financial transactions and decisions are made with utmost transparency, with regular reports shared with all members.</p>
                    </div>
                    <div class="point-card">
                        <h3>Mutual Support</h3>
                        <p>We are committed to providing financial, emotional, and professional support to our members during challenging times.</p>
                    </div>
                    <div class="point-card">
                        <h3>Growth & Development</h3>
                        <p>We strive to create opportunities for personal and professional development for all our members through mentorship and networking.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Us</h3>
                <p>Mt Sinai Alumni Association is a welfare group dedicated to supporting its members through collaborative efforts and mutual support.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#events"><i class="fas fa-calendar"></i> Events</a></li>
                    <li><a href="#members"><i class="fas fa-users"></i> Members</a></li>
                    <li><a href="#manifesto"><i class="fas fa-file-alt"></i> Manifesto</a></li>
                    <li><a href="#contact"><i class="fas fa-envelope"></i> Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Resources</h3>
                <ul>
                    <li><a href="#"><i class="fas fa-download"></i> Download Forms</a></li>
                    <li><a href="#"><i class="fas fa-book"></i> Constitution</a></li>
                    <li><a href="#"><i class="fas fa-file-pdf"></i> Reports</a></li>
                    <li><a href="#"><i class="fas fa-calendar-alt"></i> Event Calendar</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="currentYear"></span> Mt Sinai Alumni Association. All rights reserved.</p>
        <p class="developer">Developed by <a href="https://absolomondara.co.ke" target="_blank">Absolom Ondara</a></p>
    </div>

    <script>
        // Automatically get and display the current year
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>
        </div>
    </footer>
    <script src="main.js"></script>
    <style>
        
        /* Floating WhatsApp Button */
        .whatsapp-float {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 25px;
            right: 25px;
            background-color: #25d366;
            color: white;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 0 4px 20px rgba(37, 211, 102, 0.5);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }
        
        .whatsapp-float:hover {
            background-color: #128C7E;
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(18, 140, 126, 0.7);
        }
        
        .whatsapp-float::after {
            content: "Contact Management";
            position: absolute;
            top: -40px;
            right: 0;
            background: #075E54;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(37, 211, 102, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
            }
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            color: #718096;
            border-top: 1px solid #e2e8f0;
        }
        
        @media screen and (max-width: 768px) {
            header h1 {
                font-size: 2.2rem;
            }
            
            .whatsapp-float {
                width: 50px;
                height: 50px;
                font-size: 24px;
                bottom: 20px;
                right: 20px;
            }
            
            .whatsapp-float::after {
                font-size: 12px;
                padding: 6px 10px;
                top: -35px;
            }
        }
    </style>

    
    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/254797661940?text=Hello%20Mt%20Sinai%20Alumni%20Admin%2C%20I%20would%20like%20to%20get%20more%20information." class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>
    
    <script>
        // Add click event for the WhatsApp button
        document.querySelector('.whatsapp-float').addEventListener('click', function() {
            // You can add analytics or other tracking here
            console.log('WhatsApp button clicked');
        });
    </script>
</body>
</html>